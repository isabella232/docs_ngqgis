.. sectionauthor:: Дмитрий Барышников <dmitry.baryshnikov@nextgis.ru>

.. _ngqgis_raster_op:

Работа с растровыми данными
===========================

Проекции
--------

В QGIS реализована возможность работы с проекциями. Проекция может быть установлена как
глобально, т.е. её параметры будут применены к любому векторному слою, не содержащему инфор-
мации о проекции, так и отдельно для проекта. Кроме того, существует возможность создания 
собственных проекций, а также реализована поддержка перепроецирования "на лету" для 
векторных и растровых слоёв. Все эти функции позволяют корректно отображать одновременно 
несколько слоёв, находящихся в различных проекциях.

Все проекции в QGIS основаны на базе идентификаторов European Petroleum Group (ESPG) и
Institut Geographique National of France (IGNF) и в значительной степени абстрагированы 
от таблицы spatial_references в PostGIS версии 1.x. EPSG-коды хранятся в базе данных 
и могут быть использованы для определения проекции.

Для корректной работы перепроецирования "на лету" слой должен содержать информацию о про-
екции, в которой хранятся данные, либо она должна быть определена самостоятельно на уровне
слоя или проекта. Для слоёв PostGIS QGIS использует идентификатор проекции, определяемый в
момент создания слоя. Для данных, хранящихся в форматах, поддерживаемых OGR, информация
о проекции должна быть представлена в соответствующем файле, структура которого определяет-
ся форматом. В случае shape-файлов - это файл, содержащий описание проекции в формате Well
Known Text (WKT) и имеющий то же имя, что и shape-файл, но с расширением *.prj. 
Например, для файла alaska.shp файлом описания проекции будет alaska.prj.

Всякий раз, когда происходит выбор новой проекции, используемые единицы слоя автоматически
изменяются, что можно увидеть, перейдя во вкладку Общие диалогового окна - Свойства проекта,
открываемого по нажатию кнопки Редактировать (Gnome, OS X) или Настройки (KDE, Windows)

QGIS создаёт новые проекты с использованием системы координат по умолчанию. Изначально 
используется система координат EPSG:4326 - WGS 8. Это значение можно изменить, нажав 
кнопку "Выбрать" в первой группе настроек во вкладке "Система координат" (см. рисунок
figure_projection_1, рис.9.1). Указанное значение будет использоваться по всех 
последующих сеансах работы.

При загрузке в проект слоёв, не содержащих информации о проекции, необходимо иметь 
возможность контролировать и определять проекции таких слоёв. Проекции могут быть 
установлены глобально или на уровне проекта. Для выполнения этой операции перейдите 
во вкладку "Система координат окна", открываемого через Редактирование - Параметры (Gnome, OS X) 
или Установки - Параметры (KDE, Windows).

На рисунке figure_projection_1 показаны возможные варианты:

1. Запрашивать систему координат.
2. Использовать систему координат проекта.
3. Использовать указанную систему координат.

Если необходимо задать проекцию для слоя, в котором информация о ней отсутствует, 
то это можно сделать во вкладке Общие окна свойств растрового (см. Общие) или 
векторного (см. Общие) слоя. Если слой уже содержит информацию о проекции, то вкладка 
будет выглядеть как показано на рисунке Vector Layer Properties Dialog (рис.11.6).
 
Контекстное меню слоя содержит два элемента для работы с системой координат. 
Пункт меню Изменить систему координат вызывает диалог Выбор системы координат 
(см. рисунок figure_projection_2). А пункт Выбрать систему координат слоя для проекта 
устанавливает систему координат проекта равной системе координат слоя.

Преобразования 
--------------

QGIS поддерживает перепроецирование растровых и векторных слоёв "на лету", но по умолчанию
эта возможность отключена. Для её активации необходимо установить флажок "Включить 
преобразование координат "на лету" на вкладке "Система координат" диалогового окна 
"Свойства проекта". 
Существует три способа доступа к указанной вкладке:
1. Выберите пункт "Свойства проекта" в меню Редактирование (Gnome, OS X) или Установки
(KDE, Windows).
2. Нажмите кнопку "Преобразование координат", расположенную в правом нижнем углу строки
состояния.
3. Включить преобразование координат "на лету" по умолчанию на вкладке "Система координат"
диалога Параметры активировав флажок "Включить преобразование координат "на лету".

Извлечение
----------

Анализ
------

Прочее
------


