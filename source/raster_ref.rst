.. sectionauthor:: Артём Светлов <artem.svetlov@nextgis.ru>

.. _raster_ref:
    
Привязка растров
===================

С помощью данного модуля расширения пользователь QGIS получает возможность привязывать растры к координатам.

Для начала работу нужно включить модуль "Привязка растров (GDAL)" в списке модулей. 

После установки модуля появится пункт меню Растр --> Привязка растров.

Этот плагин предоставляет графический интерфейс, в котором пользователь указывает общие опорные точки (традиционно называются gcp, ground control points) на растре и на карте в основном окне NextGIS QGIS. Так же координаты опорных точек можно вводить цифрами с клавиатуры, если на карте есть координатная сетка, и пользователь представляет её код EPSG. Затем при расчёте генерируется новый файл в формате GeoTIFF, с информацией о привязке внутри. 

Примеры операций, которые можно сделать в этом модуле
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

* Привязать советскую топокарту к слою openstreetmap
* Привязать топокарту с сеткой, введя её координаты с клавиатуры, это будет более точно, чем привязывать по точкам.
* Привязать 1-2 снимка поверхности с летательного аппарата по визуальным ориентирам
* Привязать сфотографированную распечатку карты OSM с отметками ручкой, что бы потом оцифровать эти отметки
* Привязать древнюю карту из книги царских времён у которой нет сетки, или она в неизвестной системе координат.

Порядок действий для привязки карты
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

1. Достать растровый файл с картой, которую вы будете привязывать. Если она в формате .gif, то сконвертируйте её в jpeg или png используя инструмент Растр --> Преобразование --> Преобразовать формат (см http://docs.nextgis.ru/docs_ngqgis/source/raster_op.html#id9) или любой графический редактор.
2. Решить к какой карте вы будете её привязывать, и открыть её в QGIS. 
3. Решить в какой системе координат нужна конечная карта, и проверить что бы в основном окне QGIS было включено перепроцирование на лету в неё.
4. Запустить модуль привязки растров: Растр --> Привязка растров. Далее описываются комманды модуля Привязка Растров.
5. Нажать Файл --> Открыть растр. Открываете вашу картинку. На экране появится диалог выбора системы координат, в нём нужно нажать "Отмена".
6. Нажать "Правка --> Добавить точку" 






.. info::

   Описание утилиты gdaltransform, которая выполняет расчёты внутри этого модуля: https://www.gdal.org/gdaltransform.html
